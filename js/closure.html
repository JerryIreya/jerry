<!DOCTYPE html>
<html>
<head>
	<title>demo</title>
</head>
<body>
	<script type="text/javascript">
		// function say667() {
		//   // Local variable that ends up within closure
		//   var num = 42;
		//   var say = function() { console.log(num); }
		//   num++;
		//   return say;
		// }
		// var sayNumber = say667();
		// sayNumber(); // logs 43

		// function sayHello(name){
		// 	var text="Hello "+name;
		// 	var say=function(){console.log(text)}
		// 	say();
		// }
		// sayHello("jerry");


		// function useFunction(fun){
		// 	var name="jerry";
		// 	fun(name);
		// }

		// useFunction(
		// 	function(name){
		// 		console.log("Herro "+name)
		// 	}
		// )

		// function sayHello(name){
		// 	var text="Hello "+name;
		// 	// This is a closure.
		// 	var say=function(){
		// 		console.log(text);
		// 	}
		// 	return say;
		// }
		// // say2 points to a closure
		// var say2=sayHello("Jerry");
		// say2();

		// function say667(){
		// 	var num=42;
		// 	var say=function(){
		// 		console.log(num);
		// 	}
		// 	num++;
		// 	return say;
		// }
		// var sayNum=say667();
		// sayNum();

		// var gLogNumber,gIncreaseNumber,gSetNumber;
		// function setupSomeGlobals(){
		// 	// Local variable that ends up within closure
		// 	var num=42;
		// 	// Store some references to functions as global variables
		// 	gLogNumber=function(){ console.log(num); }
		// 	gIncreaseNumber=function(){ num++; }
		// 	gSetNumber=function(x){ num = x; }

		// }

		// setupSomeGlobals();
		// gIncreaseNumber();	// num++ ;num=43
		// gLogNumber();		// num=43
		// gSetNumber(5);		// num=5
		// gLogNumber();		// num=5

		// var oldLog=gLogNumber;

		// setupSomeGlobals();	//num=42
		// gLogNumber();		//num=42

		// oldLog();			//num=



		// function buildList(list){
		// 	var result=[];
		// 	for (var i = 0; i < list.length; i++) {
		// 		var item='item'+i;
		// 		result.push( function(){ console.log(item+' '+list[i])} );
		// 	}
		// 	return result;
		// }
		// function testList(){
		// 	var fnlist=buildList([1,2,3]);

		// 	for (var i = 0; i < fnlist.length; i++) {
		// 		fnlist[i]();
		// 	}
		// }

		// testList();


		// function outer(){
		// 	var num=1;

		// 	var fun1=function(){
		// 		fun2();
		// 		console.log(num);
		// 	}
		// 	var fun2=function(){
		// 		num++;
		// 	}
		// 	var fun3=function(x){
		// 		num=x;
		// 	}

		// 	var result=[];
		// 	result.push(fun1);
		// 	result.push(fun2);
		// 	result.push(fun3);

		// 	return result;
		// }

		// var outResult=outer();
		// outResult[0]();	//log 2  num=2
		// outResult[1]();	//num=3
		// outResult[2](4);//num=4

		// outResult[0]();//log 5 num=5




		function newClosure(someNum,someRef){
			var num=someNum;
			var anArray=[1,2,3];
			var ref=someRef;
			return function(x){
				num+=x;
				anArray.push(num);
				console.log('num: '+num+
					'; anArray: '+anArray.toString()+
					'; ref.someVar: '+ref.someVar+';');
			}
		}

		obj={someVar:12}
		fn1=newClosure(5,obj); //num:5 
		fn2=newClosure(7,obj); //num:7
		fn1(2);	//num=7 [1,2,3,7] 12
		fn2(2);	//num=9 [1,2,3,9] 12
		obj.someVar++;	//someVar:13
		fn1(4);	//num=11 [1,2,3,7,11] 13
		fn2(4);	//num=13 [1,2,3,9,13] 13

	</script>

</body>
</html>